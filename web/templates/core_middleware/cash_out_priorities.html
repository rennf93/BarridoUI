{% extends "base.html" %}
{% load i18n static %}
{% block title %}Ponderacion de Cash Outs{% endblock %}

{% block breadcrumbs %}
    <li><a href="{% url "index" %}">{% trans "Inicio" %}</a></li>
    <li class="active">Ponderacion de Cash Outs</li>
{% endblock %}

{% block pagetitle %}Procesos Cash Out{% endblock %}

{% block content %}
    <div class="col-md-12">
        <div class="white-box">
            <h3 class="box-title">Ponderacion de Cash Outs</h3>
            <p class="text-muted">Orden de <code>Cash Outs</code> a procesar para la empresa <code> {{ company_name }}</code></p>
            <div class="table-responsive overflow-visible">
                <table class="table table-striped" id="products-table" data-company="{{ company_id }}">
                    <thead>
                        <tr>
                            <th>Producto</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                    {% for product in sorted_products %}
                        <tr class="product-row" data-value="{{ product }}" style="text-transform: uppercase">
                            <td>{{ product }}</td>
                            <td><span class="table-up fa fa-arrow-up"></span><span class="table-down fa fa-arrow-down"></span></td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>

        <div class="white-box" style="width: 100%; display: flex; justify-content: flex-start;">
                <div class="col-md-2">
                    <form class="form-inline">
                        <div class="form-group">
                            <select id="select-company" class="select form-control"
                                    onclick="on_click_company('{{ csrf_token }}')">
                                <option value="2">Wenance</option>
                                <option value="1">Creditos al Rio</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="col-md-6">
                    <button class="btn btn-primary" onclick="send_products('{{ csrf_token }}')">Modificar</button>
                </div>
        </div>
    </div>

    <script src="{% static "js/jquery.min.js" %}"></script>
    <script src="{% static "js/components/templates.js" %}"></script>
    <script src="{% static "js/components/editable_span.js" %}"></script>
    <script src="{% static "js/middleware/cashoutpriorities.js" %}"></script>
{% endblock %}

{% block onready %}

    $('.table-up').click(function () {
    var $row = $(this).parents('tr');
    if ($row.index() === 0) return; // Don't go above the header
    $row.prev().before($row.get(0));
    });

    $('.table-down').click(function () {
    var $row = $(this).parents('tr');
    $row.next().after($row.get(0));
    });

{% endblock %}